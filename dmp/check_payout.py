#! /usr/bin/env python
# -*- coding:utf-8 -*-
import urllib2
import logging
import time
from xml.dom import minidom
from urlparse import urlparse

LOGFILE = 'getAds.log'
URL = 'http://172.20.0.109:18080/ymtrack/getAds?'
OFFERLIST = [{"campaignId": 35, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=25284&aff_id=14604", "productName": "Quikr Free Classifieds", "appId": "com.quikr", "productThumbnail": "https://lh6.ggpht.com/Ef3aYjRRTvQT5anI9r-D6eTqdojXviYrbI5J3GzMX7-MW_G9hlH1yB83ncal7207Pg=w72", "categories": {"Applications": ["Shopping"]}, "payout": 0.24, "productDescription": "A local classifieds app to buy, sell, rent or find anything!", "countries": ["IN"], "imgurl": "", "recommend": 18.28}, {"campaignId": 97, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=20190&aff_id=14604", "productName": "99acres Real Estate & Property", "appId": "com.nnacres.app", "productThumbnail": "https://lh6.ggpht.com/DUP7382gNygVDNX_DX2ZxDbnPBQ2Xvv6H4-84padxR0sBkRqTBnY4V2RMAa0vfiEa4lU=w72", "categories": {"Applications": ["Business"]}, "payout": 0.16, "productDescription": "99acres \u2013 Real Estate & Property Search in India!", "countries": ["IN"], "imgurl": "", "recommend": 12.5}, {"campaignId": 127, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=17536&aff_id=14604", "productName": "my airtel", "appId": "com.myairtelapp", "productThumbnail": "https://lh6.ggpht.com/K5YmCsJk1uIl0Q3SwYh4luSsvJp52kGR0td0twOCwvjkiAouaXhZie1pG9COAcbvSSY=w72", "categories": {"Applications": ["Transportation"]}, "payout": 0.3, "productDescription": "My airtel app - your world of airtel on the go.", "countries": ["IN"], "imgurl": "", "recommend": 16.55}, {"campaignId": 130, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=19246&aff_id=14604", "productName": "OLX Free Classifieds", "appId": "com.olx.olx", "productThumbnail": "https://lh5.ggpht.com/P_s7U93poPoVpd3nD2qYsqzaLLDFYAlOBnkY3WGChUvwEQewg4b4B3irmFbNb5bdkV0=w72", "categories": {"Applications": ["Shopping"]}, "payout": 1.8, "productDescription": "The best way to buy and sell 'on the go' and in your local area.", "countries": ["BR"], "imgurl": "", "recommend": 23.69}, {"campaignId": 136, "clickURL": "http://hasoffers.ymtrack.com/aff_c?offer_id=22688&aff_id=14604", "productName": "Badabee - Send SMS", "appId": "com.badabee.apps.sms", "productThumbnail": "https://lh4.ggpht.com/n2vBbb-efwmRMlFi3qTlGmJTV4TgSkxU0yjNVV89z7VHbSMqdDoVqqB9Snjl1Qg4ojY=w72", "categories": {"Applications": ["Communications"]}, "payout": 0.4, "productDescription": "With Badabee App you can send SMS to all countries and all operators.", "countries": ["PH"], "imgurl": "", "recommend": 12.22}, {"campaignId": 137, "clickURL": "http://hasoffers.ymtrack.com/aff_c?offer_id=19636&aff_id=14604", "productName": "Akazoo", "appId": "com.akazoo.music", "productThumbnail": "https://lh4.ggpht.com/pYo_qGi8reUd1HXCRitm1OWlM5MxnHfdkekov5iK8_eJIqkrCT1qZvw3kgTEga4tzCrh=w72", "categories": {"Applications": ["Media & Video"]}, "payout": 0.6, "productDescription": "Akazoo android app, listen to unlimited music to your phone for offline listening!", "countries": ["BR"], "imgurl": "", "recommend": 16.33}, {"campaignId": 144, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=23036&aff_id=14604", "productName": "BeautyPlus - Magical Camera", "appId": "com.commsource.beautyplus", "productThumbnail": "https://lh6.ggpht.com/rayzyQYT7egLoF44aKF4wzGtzPWYH-ZXHsYNCFWTl9XUnbmniLwh7ZzX8CVQ_UwE4gO6=w72", "categories": {"Applications": ["Photography"]}, "payout": 0.5, "productDescription": "BeautyPlus - Let your cell phone turned to self-photograph artifact!", "countries": ["ID"], "imgurl": "", "recommend": 20.12}, {"campaignId": 145, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=23038&aff_id=14604", "productName": "BeautyPlus - Magical Camera", "appId": "com.commsource.beautyplus", "productThumbnail": "https://lh6.ggpht.com/rayzyQYT7egLoF44aKF4wzGtzPWYH-ZXHsYNCFWTl9XUnbmniLwh7ZzX8CVQ_UwE4gO6=w72", "categories": {"Applications": ["Photography"]}, "payout": 0.51, "productDescription": "BeautyPlus - Let your cell phone turned to self-photograph artifact!", "countries": ["MY"], "imgurl": "", "recommend": 22.11}, {"campaignId": 146, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=23040&aff_id=14604", "productName": "BeautyPlus - Magical Camera", "appId": "com.commsource.beautyplus", "productThumbnail": "https://lh6.ggpht.com/rayzyQYT7egLoF44aKF4wzGtzPWYH-ZXHsYNCFWTl9XUnbmniLwh7ZzX8CVQ_UwE4gO6=w72", "categories": {"Applications": ["Photography"]}, "payout": 0.51, "productDescription": "BeautyPlus -\u0e43\u0e2b\u0e49\u0e42\u0e17\u0e23\u0e28\u0e31\u0e1e\u0e17\u0e4c\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13\u0e2b\u0e31\u0e19\u0e44\u0e1b\u0e2a\u0e34\u0e48\u0e07\u0e1b\u0e23\u0e30\u0e14\u0e34\u0e29\u0e10\u0e4c\u0e02\u0e2d\u0e07\u0e15\u0e31\u0e27\u0e40\u0e2d\u0e07!", "countries": ["TH"], "imgurl": "", "recommend": 18.17}, {"campaignId": 148, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=23074&aff_id=14604", "productName": "Snapdeal Mobile Shopping", "appId": "com.snapdeal.main", "productThumbnail": "https://lh6.ggpht.com/alKm-4SWkF1weYMLslkqbJ0y8BigBcb4Q1p8nytFKLMg5HHyiDI4hHyQC1rZsZp74twy=w72", "categories": {"Applications": ["Shopping"]}, "payout": 0.3, "productDescription": "Snapdeal.com is India's largest online shopping site!", "countries": ["IN"], "imgurl": "", "recommend": 16.2}, {"campaignId": 152, "clickURL": "http://hasoffers.ymtrack.com/aff_c?offer_id=23194&aff_id=14604", "productName": "UR Desktop", "appId": "com.sien.launcher.launcherjb", "productThumbnail": "https://lh3.ggpht.com/uw2oRy2pb6Of7WpDjrJDBTAH_FGdyc40kXjOD8dC_Oa6CrsBqfhcXg-JoI8J-G2BFA=w72", "categories": {"Applications": ["Personalization"]}, "payout": 0.2, "productDescription": "UR Desktop \u2122: unique and exquisite HD 3D android wallpaper free download.", "countries": ["IN"], "imgurl": "", "recommend": 15.25}, {"campaignId": 157, "clickURL": "http://hasoffers.ymtrack.com/aff_c?offer_id=22916&aff_id=14604", "productName": "MakeMyTrip, Flights Hotels Bus", "appId": "com.makemytrip", "productThumbnail": "https://lh6.ggpht.com/n5mqN_SPZZZXm36yMUXSf5SpRy7nBMOlmSvqoN2LxFz2Fkhe7-MSDSSvEcOFkKpW3UU=w72", "categories": {"Applications": ["Travel & Local"]}, "payout": 0.35, "productDescription": "Plan and enjoy a perfect trip with India\u2019s number one online travel company - MakeMyTrip. ", "countries": ["IN"], "imgurl": "", "recommend": 6.14}, {"campaignId": 169, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=21994&aff_id=14604", "productName": "OLX Free Classifieds", "appId": "com.olx.olx", "productThumbnail": "https://lh5.ggpht.com/P_s7U93poPoVpd3nD2qYsqzaLLDFYAlOBnkY3WGChUvwEQewg4b4B3irmFbNb5bdkV0=w72", "categories": {"Applications": ["Shopping"]}, "payout": 1.2, "productDescription": "The best way to buy and sell 'on the go' and in your local area.", "countries": ["AR"], "imgurl": "", "recommend": 15.0}, {"campaignId": 172, "clickURL": "http://hasoffers.ymtrack.com/aff_c?offer_id=23602&aff_id=14604", "productName": "Milk Music\u2122", "appId": "com.samsung.mdl.radio", "productThumbnail": "https://lh6.ggpht.com/0TO1hq8INlKpznkywVaWU4T12UV0FhSCV29A-1O_Pk8X_c_sOBybfBWfjJZOu5bXbWOE=w72", "categories": {"Applications": ["Music & Audio"]}, "payout": 1.5, "productDescription": "Milk Music\u2122 is a free radio service with no ads.", "countries": ["US"], "imgurl": "", "recommend": 19.03}, {"campaignId": 182, "clickURL": "http://hasoffers.ymtrack.com/aff_c?offer_id=24106&aff_id=14604", "productName": "QR Code Reader", "appId": "com.wolfpackdev.qrcodereader", "productThumbnail": "https://lh4.ggpht.com/hnv6YTjyUCSfIer8fii2y0ykCztkL_K7MVaC8liIVUgv3GJA_TmlOYKdXUD9v5cUHbA=w72", "categories": {"Applications": ["Productivity"]}, "payout": 0.4, "productDescription": "QR Code Reader is the most easy-to-use QR code reader and scanner available in the store.", "countries": ["AU", "NZ"], "imgurl": "", "recommend": 16.22}, {"campaignId": 186, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=24156&aff_id=14604", "productName": "Dolphin Browser", "appId": "mobi.mgeek.TunnyBrowser", "productThumbnail": "https://lh4.ggpht.com/XglAqsuNAP5P0HjK24q0dI5FSS1vcx9mJcQoYfZbLqbf5QW7DCJH9wIiYsY5r2IGck8=w72", "categories": {"Applications": ["Communications"]}, "payout": 0.28, "productDescription": "Dolphin Browser-the exclusive features of your very own mobile web browser.", "countries": ["AD", "AE", "AF", "AG", "AI", "AL", "AM", "AO", "AQ", "AR", "AS", "AT", "AU", "AW", "AX", "AZ", "BA", "BB", "BE", "BF", "BG", "BH", "BI", "BJ", "BL", "BM", "BN", "BO", "BQ", "BR", "BS", "BT", "BV", "BW", "BY", "BZ", "CA", "CC", "CD", "CF", "CG", "CH", "CI", "CK", "CL", "CM", "CO", "CR", "CU", "CV", "CW", "CX", "CY", "CZ", "DE", "DJ", "DK", "DM", "DO", "DZ", "EC", "EE", "EG", "EH", "ER", "ES", "ET", "FI", "FJ", "FK", "FM", "FO", "FR", "GA", "GB", "GD", "GE", "GF", "GG", "GH", "GI", "GL", "GM", "GN", "GP", "GQ", "GR", "GS", "GT", "GU", "GW", "GY", "HK", "HM", "HN", "HR", "HT", "HU", "IE", "IL", "IM", "IO", "IQ", "IR", "IS", "IT", "JE", "JM", "JO", "JP", "KE", "KG", "KH", "KI", "KM", "KN", "KP", "KR", "KW", "KY", "KZ", "LA", "LB", "LC", "LI", "LK", "LR", "LS", "LT", "LU", "LV", "LY", "MA", "MC", "MD", "ME", "MF", "MG", "MH", "MK", "ML", "MM", "MN", "MO", "MP", "MQ", "MR", "MS", "MT", "MU", "MV", "MW", "MX", "MY", "MZ", "NA", "NC", "NE", "NF", "NG", "NI", "NL", "NO", "NP", "NR", "NU", "NZ", "OM", "PA", "PE", "PF", "PG", "PH", "PL", "PM", "PN", "PR", "PS", "PT", "PW", "PY", "QA", "RE", "RO", "RS", "RU", "RW", "SA", "SB", "SC", "SD", "SE", "SG", "SH", "SI", "SJ", "SK", "SL", "SM", "SN", "SO", "SR", "SS", "ST", "SV", "SX", "SY", "SZ", "TC", "TD", "TF", "TG", "TH", "TJ", "TK", "TL", "TM", "TN", "TO", "TT", "TV", "TW", "TZ", "UA", "UG", "UM", "US", "UY", "UZ", "VA", "VC", "VE", "VG", "VI", "VU", "WF", "WS", "YE", "YT", "ZA", "ZM", "ZW"], "imgurl": "", "recommend": 23.33}, {"campaignId": 187, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=19274&aff_id=14604", "productName": "Farm Heroes Saga", "appId": "com.king.farmheroessaga", "productThumbnail": "https://lh5.ggpht.com/LL1qPGrVuJBt76nJkgv_DWS1ITPSY_N0ciqZYEAbiOYuz7RkCRIV8s486wDFhW-fCUg=w72", "categories": {"Games": ["Casual"]}, "payout": 1.2, "productDescription": "From the makers of the hit game Candy Crush Saga, comes Farm Heroes Saga!", "countries": ["US"], "imgurl": "", "recommend": 16.23}, {"campaignId": 188, "clickURL": "http://hasoffers.ymtrack.com/aff_c?offer_id=24196&aff_id=14604", "productName": "UR Desktop \u2122", "appId": "com.sien.launcher.launcherjb", "productThumbnail": "https://lh3.ggpht.com/uw2oRy2pb6Of7WpDjrJDBTAH_FGdyc40kXjOD8dC_Oa6CrsBqfhcXg-JoI8J-G2BFA=w72", "categories": {"Applications": ["Personalization"]}, "payout": 0.4, "productDescription": "UR Desktop \u2122: unique and exquisite HD 3D android wallpaper free download.\r\n", "countries": ["AR"], "imgurl": "", "recommend": 16.02}, {"campaignId": 196, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=19046&aff_id=14604", "productName": "Android Tools & Antivirus", "appId": "co.android.tools.my", "productThumbnail": "https://lh5.ggpht.com/tUUvNFGG7DMMgELbgs6z6kLnxsE7XiXTnX3gx5Hto1S4cI1-cJkdPpp6xgqL7wsdZyg=w72", "categories": {"Applications": ["Tools"]}, "payout": 0.73, "productDescription": "Get all this and more with our Android security tools kit.", "countries": ["MY"], "imgurl": "", "recommend": 18.0}, {"campaignId": 198, "clickURL": "http://hasoffers.ymtrack.com/aff_c?offer_id=24402&aff_id=14604", "productName": "UR Desktop \u2122", "appId": "com.sien.launcher.launcherjb", "productThumbnail": "https://lh3.ggpht.com/uw2oRy2pb6Of7WpDjrJDBTAH_FGdyc40kXjOD8dC_Oa6CrsBqfhcXg-JoI8J-G2BFA=w72", "categories": {"Applications": ["Personalization"]}, "payout": 0.4, "productDescription": "UR Desktop \u2122: unique and exquisite HD 3D android wallpaper free download.\r\n", "countries": ["BR"], "imgurl": "", "recommend": 17.98}, {"campaignId": 199, "clickURL": "http://hasoffers.ymtrack.com/aff_c?offer_id=24408&aff_id=14604", "productName": "UR Desktop \u2122", "appId": "com.sien.launcher.launcherjb", "productThumbnail": "https://lh3.ggpht.com/uw2oRy2pb6Of7WpDjrJDBTAH_FGdyc40kXjOD8dC_Oa6CrsBqfhcXg-JoI8J-G2BFA=w72", "categories": {"Applications": ["Personalization"]}, "payout": 0.4, "productDescription": "UR Desktop \u2122: unique and exquisite HD 3D android wallpaper free download.\r\n", "countries": ["CL"], "imgurl": "", "recommend": 18.69}, {"campaignId": 200, "clickURL": "http://hasoffers.ymtrack.com/aff_c?offer_id=24406&aff_id=14604", "productName": "UR Desktop \u2122", "appId": "com.sien.launcher.launcherjb", "productThumbnail": "https://lh3.ggpht.com/uw2oRy2pb6Of7WpDjrJDBTAH_FGdyc40kXjOD8dC_Oa6CrsBqfhcXg-JoI8J-G2BFA=w72", "categories": {"Applications": ["Personalization"]}, "payout": 0.4, "productDescription": "UR Desktop \u2122: unique and exquisite HD 3D android wallpaper free download.", "countries": ["CO"], "imgurl": "", "recommend": 15.96}, {"campaignId": 201, "clickURL": "http://hasoffers.ymtrack.com/aff_c?offer_id=24404&aff_id=14604", "productName": "UR Desktop \u2122", "appId": "com.sien.launcher.launcherjb", "productThumbnail": "https://lh3.ggpht.com/uw2oRy2pb6Of7WpDjrJDBTAH_FGdyc40kXjOD8dC_Oa6CrsBqfhcXg-JoI8J-G2BFA=w72", "categories": {"Applications": ["Personalization"]}, "payout": 0.4, "productDescription": "UR Desktop \u2122: unique and exquisite HD 3D android wallpaper free download.", "countries": ["MX"], "imgurl": "", "recommend": 19.26}, {"campaignId": 202, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=23078&aff_id=14604", "productName": "Mobile, DTH Recharge &Shopping", "appId": "net.one97.paytm", "productThumbnail": "https://lh5.ggpht.com/QODLrHuQBnWmDSVd4hSVWCFyCaiyilExf6nvdEKuugcCLh9tNOl7uVxTFffVKrHatpHs=w72", "categories": {"Applications": ["Shopping"]}, "payout": 0.45, "productDescription": "All new Paytm is here.", "countries": ["IN"], "imgurl": "", "recommend": 16.99}, {"campaignId": 207, "clickURL": "http://hasoffers.ymtrack.com/aff_c?offer_id=24382&aff_id=14604", "productName": "Onavo Count | Data Usage", "appId": "com.onavo.android.onavoid", "productThumbnail": "https://lh3.ggpht.com/kMZIw5nVEiXSVdIQA9uIZuzkTH4z3-Pe4X4Qm4P20cvJbLi-tR4qJ0dab7nvAu8_Vvg=w72", "categories": {"Applications": ["Tools"]}, "payout": 0.35, "productDescription": "Onavo Count is a stunning app with intuitive reporting to help you understand how you use mobile data. ", "countries": ["AR"], "imgurl": "", "recommend": 13.96}, {"campaignId": 208, "clickURL": "http://hasoffers.ymtrack.com/aff_c?offer_id=24392&aff_id=14604", "productName": "Onavo Count | Data Usage", "appId": "com.onavo.android.onavoid", "productThumbnail": "https://lh3.ggpht.com/kMZIw5nVEiXSVdIQA9uIZuzkTH4z3-Pe4X4Qm4P20cvJbLi-tR4qJ0dab7nvAu8_Vvg=w72", "categories": {"Applications": ["Tools"]}, "payout": 0.35, "productDescription": "Onavo Count is a stunning app with intuitive reporting to help you understand how you use mobile data. ", "countries": ["BR"], "imgurl": "", "recommend": 15.34}, {"campaignId": 216, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=24636&aff_id=14604", "productName": "Puzzle & Dragons", "appId": "jp.gungho.padEN", "productThumbnail": "https://lh3.ggpht.com/nmLRZtMYBPLtjyo03Pi8Uj4QFUG4gWx3jiJhO1wZVHzpTX7zNuFJS1oFkTerSK2ZhBQ=w72", "categories": {"Games": ["Brain & Puzzle"]}, "payout": 1.0, "productDescription": "Addictive and FREE match-3 puzzle gameplay with classic monster-collecting RPG fun!", "countries": ["CA", "US"], "imgurl": "", "recommend": 17.14}, {"campaignId": 217, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=24648&aff_id=14604", "productName": "Elemental Kingdoms (CCG)", "appId": "air.com.perfectworld.ek", "productThumbnail": "https://lh6.ggpht.com/l1A2F2W__tNVUUUd8QzS_b6cLOoHgY3VVAhuQ_r5NQ05nJ1pWjJbaPZCcDkwVZ_hp7U=w72", "categories": {"Games": ["Cards & Casino"]}, "payout": 1.2, "productDescription": "Elemental Kingdoms is a free-to-play collectible card game (CCG) and strategic battle game.", "countries": ["US"], "imgurl": "", "recommend": 18.01}, {"campaignId": 218, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=23570&aff_id=14604", "productName": "Empire: Four Kingdoms", "appId": "air.com.goodgamestudios.empirefourkingdoms", "productThumbnail": "https://lh4.ggpht.com/8zn43jtr6t6NXYcQ59A9VDMrtGDb77ArLHvTubXTV4Lc1pGei4fCPoL2uohBVw3MYzs=w72", "categories": {"Games": ["Arcade & Action"]}, "payout": 2.5, "productDescription": "\uc218\ubc31\ub9cc \uba85\uc758 \ud50c\ub808\uc774\uc5b4\uc640 \uacbd\uc7c1, \uc911\uc138 \uc804\ub7b5 \uac8c\uc784\uc744 \uc2b9\ub9ac \uc7ac\uc0dd\uc744 \uc2dc\uc791!\r\n", "countries": ["KR"], "imgurl": "", "recommend": 19.33}, {"campaignId": 219, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=24650&aff_id=14604", "productName": "Empire: Four Kingdoms", "appId": "air.com.goodgamestudios.empirefourkingdoms", "productThumbnail": "https://lh4.ggpht.com/8zn43jtr6t6NXYcQ59A9VDMrtGDb77ArLHvTubXTV4Lc1pGei4fCPoL2uohBVw3MYzs=w72", "categories": {"Games": ["Arcade & Action"]}, "payout": 1.8, "productDescription": "Empire: Four Kingdoms FOR FREE!", "countries": ["US"], "imgurl": "", "recommend": 19.77}, {"campaignId": 223, "clickURL": "http://hasoffers.ymtrack.com/aff_c?offer_id=23694&aff_id=14604", "productName": "Detektor g\u00e9nia", "appId": "com.mc.sk.ruagenius", "productThumbnail": "https://lh3.ggpht.com/QS5qCcb4SX-SkK0JETR-Li_p4TPg8-ZJQDzJpdfUanQ56KZYwBqcP5zgW87hC4zkQCE=w72", "categories": {"Games": ["Brain & Puzzle"]}, "payout": 0.6, "productDescription": "The new Genius detector will find out if you are a GENIE in a few seconds.", "countries": ["SK"], "imgurl": "", "recommend": 15.12}, {"campaignId": 224, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=24700&aff_id=14604", "productName": "Jabong", "appId": "com.jabong.android", "productThumbnail": "https://lh3.ggpht.com/iKa26o8XnL1nzvnPxhcPAFF_PeGd59sZhfk6Bhe16FjHHtgwlqHoXyoRIUnVE7bqI3k=w72", "categories": {"Applications": ["Shopping"]}, "payout": 0.3, "productDescription": "Experience the true joy of shopping with the new Jabong App!", "countries": ["IN"], "imgurl": "", "recommend": 16.29}, {"campaignId": 226, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=24870&aff_id=14604", "productName": "\u94f6\u6cb3\u4f20\u8bf4:\u65f6\u7a7a\u8230\u961f(\u7b2c\u4e00\u79d1\u5e7b\u6218\u4e89\u624b\u6e38)", "appId": "com.tap4fun.galaxyempire2_android", "productThumbnail": "https://lh3.ggpht.com/rxJOmOWWOjlUUxufkFLetLmznHjcA52e6n-9ewMxr0ALsdl7U90km88bIoI0B091s9Ab=w72", "categories": {"Games": ["Arcade & Action"]}, "payout": 2.5, "productDescription": "\u4e2d\u56fd\u7b2c\u4e00\u79d1\u5e7b\u6218\u4e89\u624b\u6e38\uff0c2014\u5e74\u6700\u65b0\u8d44\u6599\u7247\u201c\u65f6\u7a7a\u8230\u961f\u201d\uff0c\u9707\u64bc\u53d1\u5e03\uff01", "countries": ["HK", "JP"], "imgurl": "", "recommend": 17.99}, {"campaignId": 227, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=16604&aff_id=14604", "productName": "\u94f6\u6cb3\u4f20\u8bf4:\u65f6\u7a7a\u8230\u961f(\u7b2c\u4e00\u79d1\u5e7b\u6218\u4e89\u624b\u6e38)", "appId": "com.tap4fun.galaxyempire2_android", "productThumbnail": "https://lh3.ggpht.com/rxJOmOWWOjlUUxufkFLetLmznHjcA52e6n-9ewMxr0ALsdl7U90km88bIoI0B091s9Ab=w72", "categories": {"Games": ["Arcade & Action"]}, "payout": 1.8, "productDescription": "\u300a\u79d1\u5e7b\u4e16\u754c\u300b\u6742\u5fd7\u5b98\u65b9\u63a8\u8350\u624b\u6e38\uff0c\u559c\u7231\u79d1\u5e7b\u7684\u4f60\u7edd\u5bf9\u4e0d\u80fd\u9519\u8fc7\uff01", "countries": ["SG", "TW"], "imgurl": "", "recommend": 17.95}, {"campaignId": 229, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=24874&aff_id=14604", "productName": "Battle Nations", "appId": "com.z2.battlenations.google&hl=en", "productThumbnail": "https://lh6.ggpht.com/AqA3Uq07LfMy8tLCQJrzoNQQ9zOhWS_CfC9x5avONjVRumQm-t57kGvXLTVLRv47R1yc=w72", "categories": {"Games": ["Arcade & Action"]}, "payout": 1.8, "productDescription": "Battle Nations, the award winning epic combat strategy game!", "countries": ["RU"], "imgurl": "", "recommend": 18.11}, {"campaignId": 230, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=15692&aff_id=14604", "productName": "Flipkart", "appId": "com.flipkart.android", "productThumbnail": "https://lh3.ggpht.com/9Hd8IHLzvYs6HlKH86QjvcPVC97uSMIcDGk5N5baglJB2yJNXCnx4JDF2md4FHIUmQ=w72", "categories": {"Applications": ["Shopping"]}, "payout": 0.38, "productDescription": "The Flipkart Android App is a Fast, Fun and Easy way to access the online megastore you\u2019ve come to love. ", "countries": ["IN"], "imgurl": "", "recommend": 17.13}, {"campaignId": 232, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=25056&aff_id=14604", "productName": "Tictoc - Free SMS & Text", "appId": "kr.co.tictocplus", "productThumbnail": "https://lh6.ggpht.com/glNfU1fEHmcE9U4jrdLjwFGBGcl_XblOJponFoWcFGts75ITS9Tmn21rMCawMmjgCb8=w72", "categories": {"Applications": ["Communications"]}, "payout": 0.7, "productDescription": "Chat with friends anytime, anywhere with Tictoc for free.", "countries": ["TR"], "imgurl": "", "recommend": 18.55}, {"campaignId": 233, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=25016&aff_id=14604", "productName": "Flight Hotel Indian Rail IRCTC", "appId": "com.cleartrip.android", "productThumbnail": "https://lh5.ggpht.com/ZWjysWhc1Rk7rgQF-MjwCdX4sWA9vxhgu8QI7CvvWKgRH0cy-NLI5QaYxqHYD4nTwBI=w72", "categories": {"Applications": ["Travel & Local"]}, "payout": 0.35, "productDescription": "Dedicated to making travel simple, Cleartrip lets you book flights, trains and hotels with our fast, clean, easy-to-use app.", "countries": ["IN"], "imgurl": "", "recommend": 17.28}, {"campaignId": 234, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=25090&aff_id=14604", "productName": "\uc288\ud37c \uc2a4\ud0c0", "appId": "com.animoca.google.starGirl", "productThumbnail": "https://lh6.ggpht.com/4f2l-AiitbTNwkLDT8nKBgtSzw4wBygLqDnbsspmyAj8JI0gV7qmy-VEOyOCO8Z0eHo=w72", "categories": {"Applications": ["Entertainment"]}, "payout": 0.54, "productDescription": "\ubcc4\uc5d0 \ub3c4\ub85c, \uadf8\ub9ac\uace0 \uc7ac\ubbf8\ub97c \uad6c\ucd95\ud558\ub294 \uc720\uba85 \uc778\uc0ac \uc57c\ub9dd\uc758 \uc2e4\ud604\uc5d0 \"\uc288\ud37c \uc2a4\ud0c0\"\uc758 \uc5ec\ud589!", "countries": ["KR"], "imgurl": "", "recommend": 18.99}, {"campaignId": 235, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=25114&aff_id=14604", "productName": "Mobile Recharge and Bill Pay", "appId": "com.mobikwik_new", "productThumbnail": "https://lh3.ggpht.com/qG8NViKtGOwmIdMXM5Ya6BLQQorLEKhazjoXmPFOW48AQ2ptz99oMkfTcFBWKcBC7YI=w72", "categories": {"Applications": ["Shopping"]}, "payout": 0.24, "productDescription": "MobiKwik is India's Fastest App for Mobile Recharge, DTH Recharge and Bill Payments. ", "countries": ["IN"], "imgurl": "", "recommend": 17.15}, {"campaignId": 236, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=25206&aff_id=14604", "productName": "RPG Hero Story", "appId": "com.skyboard.google.rpghero", "productThumbnail": "https://lh3.ggpht.com/7cV2snqVIPLAucbC2JQOzpGcv2q0bcbL9Wvpk4Du46K6SiIvG1emak3bD9_RW_TTKg=w72", "categories": {"Games": ["Arcade & Action"]}, "payout": 0.54, "productDescription": "RPG Hero Story-Teamwork and strategy to build the strongest alliances!\r\n", "countries": ["ES", "GB", "US"], "imgurl": "", "recommend": 20.31}, {"campaignId": 238, "clickURL": "http://hasoffers.ymtrack.com/aff_c?offer_id=25120&aff_id=14604", "productName": "foodpanda", "appId": "com.global.foodpanda.android", "productThumbnail": "https://lh6.ggpht.com/JQFEKGQWjoQ1ZWX4k0VDRczLLsVOMwcnQFGMLtabZf6A3Zpv6tc1iBbYQZeImMZ9A68=w72", "categories": {"Applications": ["Lifestyle"]}, "payout": 0.5, "productDescription": "Come and use the world-renowned, the most convenient food deliveries App!\r\n", "countries": ["IN"], "imgurl": "", "recommend": 21.01}, {"campaignId": 239, "clickURL": "http://hasoffers.ymtrack.com/aff_c?offer_id=24988&aff_id=14604", "productName": "Dragons Of Atlantis", "appId": "com.kabam.doamobile", "productThumbnail": "https://lh5.ggpht.com/lZz1tEc1HTmvKtfPhkFAyxC1P_sFkTvG-XdU0wwCH8z2ob3eyHDf4Z6nJTkhJQATwDMh=w72", "categories": {"Games": ["Arcade & Action"]}, "payout": 1.3, "productDescription": "15 million players on Internet! Now this popular game has landed on phone platform!", "countries": ["AU", "CA", "CH", "GB", "JP", "KR", "NO", "US"], "imgurl": "", "recommend": 20.17}, {"campaignId": 240, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=25264&aff_id=14604", "productName": "Battle Nations", "appId": "com.z2.battlenations.google&hl=en", "productThumbnail": "https://lh6.ggpht.com/AqA3Uq07LfMy8tLCQJrzoNQQ9zOhWS_CfC9x5avONjVRumQm-t57kGvXLTVLRv47R1yc=w72", "categories": {"Games": ["Arcade & Action"]}, "payout": 1.8, "productDescription": "Battle Nations, the award winning epic combat strategy game!", "countries": ["DE"], "imgurl": "", "recommend": 18.19}, {"campaignId": 241, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=25312&aff_id=14604", "productName": "GO Launcher EX", "appId": "com.gau.go.launcherex", "productThumbnail": "https://lh3.ggpht.com/WlqRUdUAh6qPiPiMp3FGxTCZ6J6Qmq8Q9lRBIdkt0A4aJZghhVrY62HTO3ajdoan6iI=w72", "categories": {"Applications": ["Personalization"]}, "payout": 0.18, "productDescription": "GO Launcher EX- the world's 200 million users\u2018choice, the highest user votes desktop applications!", "countries": ["CL", "CM", "CO", "CR", "CU", "CV", "CW", "CX", "CY", "CZ", "DE", "DJ", "DK", "DM", "DO", "DZ", "EC", "EE", "EG", "EH", "ER", "ES", "ET", "FI", "FJ", "FK", "FM", "FO", "FR", "GA", "GB", "GD", "GE", "GF", "GG", "GH", "GI", "GL", "GM", "GN", "GP", "GQ", "GR", "GS", "GT", "GU", "GW", "GY", "HK", "HM", "HN", "HR", "HT", "HU", "ID", "IE", "IL", "IM", "IN", "IO", "IQ", "IR", "IS", "IT", "JE", "JM", "JO", "JP", "KE", "KG", "KH", "KI", "KM", "KN", "KP", "KR", "KW", "KY", "KZ", "LA", "LB", "LC", "LI", "LK", "LR", "LS", "LT", "LU", "LV", "LY", "MA", "MC", "MD", "ME", "MF", "MG", "MH", "MK", "ML", "MM", "MN", "MO", "MP", "MQ", "MR", "MS", "MT", "MU", "MV", "MW", "MX", "MY", "MZ", "NA", "NC", "NE", "NF", "NG", "NI", "NL", "NO", "NP", "NR", "NU", "NZ", "OM", "PA", "PE", "PF", "PG", "PH", "PK", "PL", "PM", "PN", "PR", "PS", "PT", "PW", "PY", "QA", "RE", "RO", "RS", "RU", "RW", "SA", "SB", "SC", "SD", "SE", "SG", "SH", "SI", "SJ", "SK", "SL", "SM", "SN", "SO", "SR", "SS", "ST", "SV", "SX", "SY", "SZ", "TC", "TD", "TF", "TG", "TH", "TJ", "TK", "TL", "TM", "TN", "TO", "TR", "TT", "TV", "TW", "TZ", "UA", "UG", "UM", "US", "UY", "UZ", "VA", "VC", "VE", "VG", "VI", "VN", "VU", "WF", "WS", "YE", "YT", "ZA", "ZM", "ZW"], "imgurl": "", "recommend": 22.0}, {"campaignId": 242, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=25134&aff_id=14604", "productName": "Dulux Visualizer IN", "appId": "com.cethar.dcs.duluxcolour", "productThumbnail": "https://lh6.ggpht.com/EYCljN8elj8ZRSZapiEEMyMk2kQ6H1xe6nl1T8HCO4niVoFyHv7TlxiUDFrLJe_QOwk=w72", "categories": {"Applications": ["Lifestyle"]}, "payout": 0.24, "productDescription": " \u2018Dulux Visualizer\u2019 app \u2013 helping you SEE YOUR OWN ROOM IN ANY COLOUR, LIVE! ", "countries": ["IN"], "imgurl": "", "recommend": 19.22}, {"campaignId": 243, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=25352&aff_id=14604", "productName": "Mantri Corp App", "appId": "com.mantricorporate", "productThumbnail": "https://lh5.ggpht.com/90FCFw07sBgdkD-2OfdtbdUaVbxQCmTnLogjuHJgzgYE21k2GWLZstcIxw2i82DyhA=w72", "categories": {"Applications": ["Business"]}, "payout": 0.35, "productDescription": "Mantri Developers is one of India's leading real estate developers building world class residential properties, IT parks, shopping complexes, commercial buildings and educational institutions. ", "countries": ["IN"], "imgurl": "", "recommend": 18.88}, {"campaignId": 244, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=25384&aff_id=14604", "productName": "\u66f9\u64cd\u4e4b\u91ce\u671b - \u8c46\u82b1\u59b9\u5433\u514b\u7fa3\u78c5\u7921\u4ee3\u8a00", "appId": "com.kimi.ggplay.fknsg", "productThumbnail": "https://lh4.ggpht.com/S7-eG2LtDJH6G4A4CqT44wwV0Dw-FiTsKgg1ih4sAXsdybGTUA-fgdMDCR0QjEE9k1E=w72", "categories": {"Games": ["Arcade & Action"]}, "payout": 1.6, "productDescription": " \u53f2\u4e0a\u6700\u985b\u8986\u3001\u300c\u64cd\u300d\u5c55\u958b\u7684\u5287\u60c5\uff0c\u8b93\u4f60\u5927\u547c\u904e\u766e", "countries": ["TW"], "imgurl": "", "recommend": 17.96}, {"campaignId": 245, "clickURL": "http://yeahmobi.go2cloud.org/aff_c?offer_id=25222&aff_id=14604", "productName": "Celebrity Gossip Photos Videos", "appId": "in.tml.and.follocelebs", "productThumbnail": "https://lh3.ggpht.com/X754bqyj5OPM_qCupXXM0l5cYR6-zi91ArcXMTrqzL9ha-ksLRPRhQVYaCvKLLMnAp8=w72", "categories": {"Applications": ["Entertainment"]}, "payout": 0.18, "productDescription": "Follo brings you, close to your favourite bollywood and regional celebrities!", "countries": ["IN"], "imgurl": "", "recommend": 16.21}]

def get_zips(request):
    try:
        dom = minidom.parseString(urllib2.urlopen(URL + request).read())
        offers = [[urlparse(payout.childNodes[0].nodeValue).query.split("=")[1].strip("&amp;aff_id"), urlparse(payout.childNodes[0].nodeValue).query.split("=")[2]] for payout in dom.getElementsByTagName("clickURL")]
        payouts = [payout.childNodes[0].nodeValue for payout in dom.getElementsByTagName("payout")]
        zips = zip(offers, payouts)
        return zips
    except Exception:
        print "can't parse xml from request: {0}".format(request)
        return -1

def get_list():
    with open(LOGFILE) as fp:
        requests = fp.readlines()
    tmp_list = []
    for request in requests:
        begin, end = request.find("publisherId"), request.find("HTTP/1.0")
        tmp_list.append(request[begin:end].strip())
    return list(set(tmp_list)) #duplicate removal

def main():
    success = 0
    failed = 0
    print 'run test begin at: {0}'.format(time.ctime())
    logging.basicConfig(filename = 'run.log', level=logging.DEBUG)
    logging.debug('run begin at: {0}'.format(time.ctime()))
    requests = get_list()
    for index, request in enumerate(requests):
        zips = get_zips(request)
        if zips == -1:
            continue
        totalzipdata = len(zips)
        passcount = 0
        for zipdata in zips:
            for offer in OFFERLIST:
                offer = str(offer)
                if zipdata[0][0] in offer and zipdata[0][1] in offer and zipdata[1] in offer:
                    passcount += 1
                    break
        if passcount == totalzipdata:
            logging.debug('current index: {0} current request: {1} comapre result: success'.format(index, request))
            success += 1
        else:
            print request
            logging.debug('current index: {0} current request: {1} comapre result: failed'.format(index, request))
            failed += 1
    logging.debug('run end at: {0}'.format(time.ctime()))
    print 'run test over, success: %d, failed: %d' % (success,failed) 

if __name__ == '__main__':
    #main()
    print len(get_list())
